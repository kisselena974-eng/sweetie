*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  background: #000;
}

body {
  background: var(--color-background);
  min-height: 100vh;
  font-family: 'Roboto Flex', sans-serif;
  /* Prevent pull-to-refresh and overscroll on mobile */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* ===========================================
   LANDING PAGE LAYOUT
   Expressive Design: emphasis on visual hierarchy,
   fluid motion, and meaningful interactions
   =========================================== */

.landing-page {
  display: grid;
  grid-template-rows: auto 1fr auto;
  width: 100%;
  height: 100%;
  padding: 40px 60px;
  box-sizing: border-box;
}

/* Header */
.landing-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.header-left {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.landing-title {
  font-size: 11pt;
  font-weight: 700;
  color: var(--landing-accent-color, #7ED321);
  margin: 0;
  line-height: 14pt;
  transition: color 0.4s cubic-bezier(0.2, 0, 0, 1);
}

.landing-subtitle {
  font-size: 11pt;
  font-weight: 400;
  color: #8A8A8A;
  line-height: 14pt;
  margin: 0;
  max-width: 280px;
}

.header-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 16px;
}

.language-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
}

.lang-btn {
  background: none;
  border: none;
  color: #666666;
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11pt;
  font-weight: 400;
  cursor: pointer;
  padding: 4px 0;
  line-height: 1.2;
  transition: color 0.2s cubic-bezier(0.2, 0, 0, 1),
              transform 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.lang-btn.active {
  color: #FFFFFF;
  font-weight: 600;
}

.lang-btn:hover {
  color: #FFFFFF;
  transform: translateY(-1px);
}

.lang-btn:active {
  transform: scale(0.95);
}

.lang-separator {
  color: #444444;
  font-size: 11pt;
  line-height: 1.2;
}

.about-btn {
  background: none;
  border: none;
  color: #FFFFFF;
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11pt;
  font-weight: 400;
  cursor: pointer;
  padding: 4px 0;
  line-height: 1.2;
  text-decoration: none;
  transition: color 0.2s cubic-bezier(0.2, 0, 0, 1),
              transform 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.about-btn:hover {
  color: var(--landing-accent-color, #7ED321);
  transform: translateY(-1px);
}

.about-btn:active {
  transform: scale(0.95);
}

/* Main - Watch centered */
.landing-main {
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Footer */
.landing-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
}

/* Legend - subdued, informational */
.landing-legend {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.legend-title {
  font-size: 11pt;
  font-weight: 500;
  color: #FFFFFF;
  margin: 0;
  line-height: 14pt;
  letter-spacing: 0.01em;
}

.legend-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.legend-list li {
  font-size: 10pt;
  font-weight: 400;
  color: #777777;
  line-height: 14pt;
  white-space: nowrap;
}

/* Glucose Slider - interactive control */
.landing-slider {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.slider-label {
  font-size: 10pt;
  font-weight: 400;
  color: #666666;
  line-height: 1.3;
}

.slider-controls {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0;
}

.slider-controls #glucose-slider {
  width: 100px;
  transform: rotate(-90deg);
  transform-origin: center center;
  margin: 70px 0;
  margin-right: -32px;
  cursor: grab;
}

.slider-controls #glucose-slider:active {
  cursor: grabbing;
}

.slider-controls .glucose-value {
  display: none;
}

/* Trend arrow button - expressive interaction */
.slider-controls .trend-arrow-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.25s cubic-bezier(0.2, 0, 0, 1),
              transform 0.25s cubic-bezier(0.2, 0, 0, 1),
              border-color 0.25s cubic-bezier(0.2, 0, 0, 1);
}

.slider-controls .trend-arrow-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.slider-controls .trend-arrow-btn:active {
  transform: scale(0.92);
  background: rgba(255, 255, 255, 0.15);
}

.slider-controls .trend-arrow-btn svg {
  transition: transform 0.35s cubic-bezier(0.2, 0, 0, 1);
}

/* Responsive - Tablet */
@media (max-width: 900px) {
  .landing-page {
    padding: 30px 40px;
  }

  .header-right {
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
  }

  .landing-footer {
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-end;
  }

  .landing-legend {
    align-items: flex-start;
    text-align: left;
  }

  .landing-slider {
    align-items: flex-end;
  }
}

/* Responsive - Mobile */
@media (max-width: 600px) {
  .landing-page {
    padding: 24px 20px;
  }

  .landing-subtitle {
    font-size: 10pt;
    max-width: 200px;
  }

  .landing-header {
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-start;
  }

  .header-right {
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
  }

  .landing-footer {
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-end;
  }

  .landing-legend {
    align-items: flex-start;
    text-align: left;
  }

  .landing-slider {
    align-items: flex-end;
  }
}

/* Very small screens */
@media (max-width: 400px) {
  .landing-page {
    padding: 16px 12px;
  }

  .legend-list li {
    font-size: 9pt;
    line-height: 1.3;
  }
}

/* Watch container - centers the display and accommodates mockup */
.watch-container {
  position: relative;
  width: var(--mockup-width);
  height: var(--mockup-height);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Watch hardware mockup (decorative frame) */
.watch-mockup {
  position: absolute;
  width: var(--mockup-width);
  height: var(--mockup-height);
  pointer-events: none;
  z-index: 0;
  filter: brightness(0.7);
  /* Center mockup on display */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) translate(var(--mockup-offset-x, 0px), var(--mockup-offset-y, 0px));
}

/* Glass glow overlay (Material Design radial highlights) */
.watch-glow {
  position: absolute;
  width: var(--mockup-width);
  height: var(--mockup-height);
  pointer-events: none;
  z-index: 100;
  /* Center in container */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  overflow: hidden;
}

.watch-glow img {
  position: absolute;
  pointer-events: none;
}

/* Top-left highlight */
.watch-glow img:nth-child(1) {
  top: 0;
  left: 0;
  width: 85%;
}

/* Top-right highlight */
.watch-glow img:nth-child(2) {
  top: 0;
  right: 0;
  width: 70%;
}

/* Bottom-right highlight */
.watch-glow img:nth-child(3) {
  bottom: 0;
  right: 0;
  width: 75%;
}


/* Circular display */
.watch-display {
  width: var(--display-size);
  height: var(--display-size);
  background: var(--color-background);
  border-radius: 50%;
  overflow: hidden;
  position: relative;
  z-index: 1;
  /* Prevent default touch behaviors for custom gesture handling */
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Screen base styles */
.screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--color-text-color);
  background: var(--color-background);
  /* Isolation for proper blend mode compositing */
  isolation: isolate;

  /* Page transition animations */
  opacity: 0;
  transform: translateY(100%);
  pointer-events: none;
  transition:
    opacity var(--duration-long) var(--motion-effects),
    transform var(--duration-long) var(--motion-spatial);
}

.screen.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.screen.exit-up {
  opacity: 0;
  transform: translateY(-30%);
}

.screen.exit-down {
  opacity: 0;
  transform: translateY(30%);
}

.screen.enter-from-top {
  transform: translateY(-100%);
}

.screen.enter-from-bottom {
  transform: translateY(100%);
}

/* ===========================================
   CIRCULAR NAVIGATION (SVG text on path)
   222x222 circle centered in 252x252 display
   =========================================== */

.nav-circle {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* Base layer - BELOW blob */
.nav-circle-base {
  z-index: 1;
}

/* Knockout layer - ABOVE blob */
.nav-circle-knockout {
  z-index: 10;
}

/* Knockout layer - black text visible only inside blob area */
.nav-knockout {
  pointer-events: none;
}

.nav-time-knockout {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: #000000;
  letter-spacing: 0.74px;
}

.nav-glucose-knockout {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: #000000;
  letter-spacing: 1.5px;
}

.nav-dot-knockout {
  fill: #000000;
}

/* Hide knockout TEXT when graph is visible (no blob = no knockout needed) */
.screen:has(.glucose-graph.visible) .nav-circle-knockout .nav-time-knockout,
.screen:has(.glucose-graph.visible) .nav-circle-knockout .nav-glucose-knockout,
.screen:has(.glucose-graph.visible) .nav-circle-knockout .nav-arrow-knockout {
  display: none;
}

/* Hide old nav-dots inside screens (replaced by fixed page-dots) */
.nav-circle-base .nav-dot,
.nav-circle-knockout .nav-dot,
.nav-circle-knockout .nav-dot-knockout {
  display: none;
}

/* Fixed page indicator dots - always visible, outside screen animations */
.page-dots {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 100;
}

.page-dot {
  fill: var(--color-faded-bc);
  stroke: transparent;
  stroke-width: 16;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition:
    fill var(--duration-short) var(--motion-effects),
    r var(--duration-short) var(--motion-spatial);
}

.page-dot.active {
  fill: var(--color-text-color);
}

/* Fixed time display - always visible, outside screen animations */
.fixed-time {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 100;
}

.fixed-time-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: #CCCCCC;
  letter-spacing: 0.74px;
}

/* Fixed time knockout layer (black text inside blob area) */
/* Only visible on home screen where blob exists */
.fixed-time-knockout {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 101;
}

.fixed-time-text-knockout {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: #000000;
  letter-spacing: 0.74px;
}

/* Fixed glucose display - stays visible during page transitions */
.fixed-glucose {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 100;
  opacity: 0;
}

.fixed-glucose.visible {
  opacity: 1;
}

.fixed-glucose-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: var(--color-accent-good);
  letter-spacing: 1.5px;
}

.fixed-glucose-arrow {
  transition: transform var(--duration-short) var(--motion-spatial);
}

/* Hide time elements inside screens (fixed-time replaces them) */
.screen .time,
.nav-time,
.nav-time-knockout {
  display: none;
}

/* Time on top arc */
.nav-time {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: #CCCCCC;
  letter-spacing: 0.74px;
}

/* Page indicator dots on right arc - see below for full styling */

/* Glucose reading on bottom arc */
.nav-glucose {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: var(--color-accent-good);
  letter-spacing: 1.5px;
}

/* Legacy time display (for other screens) */
.time {
  position: absolute;
  top: 28px;
  left: 50%;
  transform: translateX(-50%);
  font-size: var(--text-font-size-l);
  color: var(--color-text-color);
  letter-spacing: 1px;
}

/* Home screen - Add context button */
.add-context-btn {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  padding: 4px;
  border-radius: 50%;
  background: var(--color-surface-container);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  /* Black outline creates visual margin from other elements */
  box-shadow: 0 0 0 6px var(--color-background);
  /* No CSS transition - spring animation handles position and bg */
  -webkit-tap-highlight-color: transparent;
}

.add-context-btn:hover {
  background: var(--button-bg-hover);
}

/* Only apply :active on non-touch (hover-capable) devices */
@media (hover: hover) {
  .add-context-btn:active {
    background: var(--button-bg-pressed);
    transform: translateY(-50%) scale(0.92);
  }
}

.add-context-btn .plus-icon {
  transition: transform 0.2s ease-out;
}

.add-context-btn .plus-icon.rotated {
  transform: rotate(45deg);
}

/* ===========================================
   CONTEXT MENU - Add context overlay
   =========================================== */

.context-menu {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
}

.context-menu.open {
  pointer-events: auto;
}

.context-btn {
  position: absolute;
  padding: 8px 14px;
  border-radius: 20px;
  background: var(--color-surface-container);
  border: none;
  color: var(--color-text-color);
  font-family: 'Roboto Flex', sans-serif;
  font-size: 14px;
  font-weight: 500;
  letter-spacing: 0.5px;
  cursor: pointer;
  opacity: 0;
  transform: scale(0.8);
  pointer-events: none;
  -webkit-tap-highlight-color: transparent;
  /* CSS transition handles show/hide (replaces spring on mobile) */
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-medium) var(--motion-spatial);
}

/* Stagger delays for each button */
.context-btn[data-action="meal"] { transition-delay: 0ms; }
.context-btn[data-action="insulin"] { transition-delay: 40ms; }
.context-btn[data-action="med"] { transition-delay: 80ms; }
.context-btn[data-action="activity"] { transition-delay: 120ms; }

.context-menu.open .context-btn {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

/* Reverse stagger on close */
.context-menu:not(.open) .context-btn[data-action="meal"] { transition-delay: 90ms; }
.context-menu:not(.open) .context-btn[data-action="insulin"] { transition-delay: 60ms; }
.context-menu:not(.open) .context-btn[data-action="med"] { transition-delay: 30ms; }
.context-menu:not(.open) .context-btn[data-action="activity"] { transition-delay: 0ms; }

@media (hover: hover) {
  .context-btn:hover {
    background: var(--button-bg-hover);
  }
  .context-btn:active {
    background: var(--button-bg-pressed);
  }
}

/* Button positions (matching design home-5.png) */
.context-btn[data-action="meal"] {
  top: 82px;
  left: 34px;
}

.context-btn[data-action="insulin"] {
  top: 66px;
  right: 38px;
}

.context-btn[data-action="activity"] {
  top: 160px;
  left: 42px;
}

.context-btn[data-action="med"] {
  top: 134px;
  right: 44px;
}

/* Glucose blob indicator - positioned and animated via JavaScript */
/* z-index: 5 = between base text (1) and knockout text (10) */
.glucose-blob {
  position: absolute;
  transform: translate(-50%, -50%);
  z-index: 5;
}

/* Glucose text color transition */
/* No transition - discrete color changes at thresholds */

.nav-arrow {
  transition: transform var(--duration-short) var(--motion-spatial);
}
/* Arrow color has no transition - discrete changes at thresholds */

/* Page indicator dots - right side (legacy for non-home screens) */
.page-indicator {
  position: absolute;
  right: 22px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.page-indicator .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--color-outline);
  transition:
    background-color var(--duration-short) var(--motion-effects),
    transform var(--duration-short) var(--motion-spatial);
}

.page-indicator .dot.active {
  background: var(--color-accent-good);
  transform: scale(1.2);
}

/* Nav dots (SVG) - page indicators on right side */
.nav-dot {
  fill: var(--color-faded-bc);
  transition:
    fill var(--duration-short) var(--motion-effects),
    r var(--duration-short) var(--motion-spatial);
}

.nav-dot.active {
  fill: var(--color-text-color);
}

/* Glucose reading - bottom center (legacy for non-home screens) */
.glucose-reading {
  position: absolute;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--color-accent-good);
  font-size: var(--text-font-size-l);
  font-weight: 500;
}

.glucose-trend {
  font-size: var(--text-font-size-l);
}

/* ===========================================
   PAGE 3: INSULIN & SENSOR TRACKING
   =========================================== */

/* Tracking glucose display (bottom arc) - same as home/assistant */
.tracking-nav {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.tracking-glucose-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: var(--color-accent-good);
  letter-spacing: 1.5px;
}

.tracking-glucose-arrow {
  transition: transform var(--duration-short) var(--motion-spatial);
}

/* Info button (left side) - smaller than plus button */
.tracking-info-btn {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  padding: 2px;
  border-radius: 50%;
  background: var(--color-surface-container);
  border: none;
  color: #fff;
  font-family: 'Roboto Flex', sans-serif;
  font-size: 14px;
  font-weight: 400;
  font-style: normal;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  box-shadow: 0 0 0 6px var(--color-background);
  transition: background-color var(--duration-short) var(--motion-effects);
  -webkit-tap-highlight-color: transparent;
}

.tracking-info-btn.active {
  background: #000;
}

/* Main tracking clock */
.tracking-clock {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Concentric circles */
.tracking-circle {
  stroke: rgba(255, 255, 255, 0.25);
  stroke-width: 1;
}

/* Clock hand */
.tracking-hand {
  stroke: #fff;
  stroke-width: 1;
  stroke-linecap: round;
}

/* Center dot */
.tracking-center-dot {
  fill: #fff;
}

/* Insulin dose dots */
.tracking-dose-dot {
  fill: #fff;
}

/* Insulin trails (arcs with gradient fade) */
.tracking-trail {
  fill: none;
  stroke-width: 1;
  stroke-linecap: round;
}

/* Sensor ticks (arc segments along the inner circle) */
.tracking-sensor-tick {
  fill: none;
  stroke: #fff;
  stroke-width: 2;
  stroke-linecap: round;
  cursor: pointer;
}

.tracking-sensor-tick.expired {
  stroke: rgba(255, 255, 255, 0.15);
}

.tracking-sensor-tick.warning {
  stroke: #FF4444;
}

/* Alert dot */
.tracking-alert {
  cursor: pointer;
}

.tracking-alert-circle {
  fill: #FF4444;
}

.tracking-alert-text {
  fill: #fff;
  font-family: 'Roboto Flex', sans-serif;
  font-size: 10px;
  font-weight: 700;
  text-anchor: middle;
  dominant-baseline: central;
}

/* Info labels (SVG text on arc path) */
.tracking-labels {
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.tracking-labels.visible {
  opacity: 1;
}

.tracking-label {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11px;
  font-weight: 300;
  fill: rgba(255, 255, 255, 0.7);
  letter-spacing: 0.5px;
}

.tracking-connector {
  stroke: rgba(255, 255, 255, 0.4);
  stroke-width: 0.5;
  stroke-dasharray: 2, 2;
  fill: none;
}

/* Alert tooltips */
.tracking-tooltips {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.tracking-tooltip {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.tracking-tooltip.visible {
  opacity: 1;
}

.tracking-tooltip span {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11px;
  font-weight: 400;
  color: #fff;
  white-space: nowrap;
}

.tracking-tooltip-line {
  stroke: rgba(255, 255, 255, 0.5);
  stroke-width: 1;
}

.tracking-tooltip-line line {
  stroke: rgba(255, 255, 255, 0.5);
}

.tracking-tooltip-insulin {
  bottom: 25px;
  left: 50%;
  transform: translateX(-20%);
  flex-direction: column-reverse;
}

.tracking-tooltip-insulin .tracking-tooltip-line {
  width: 50px;
  height: 50px;
  margin-bottom: 2px;
}

.tracking-tooltip-sensor {
  bottom: 25px;
  left: 50%;
  transform: translateX(-50%);
  flex-direction: column-reverse;
}

.tracking-tooltip-sensor .tracking-tooltip-line {
  width: 10px;
  height: 40px;
  margin-bottom: 2px;
}

.faded {
  color: var(--color-faded-text);
  font-size: var(--text-font-size-s);
  margin-top: var(--spacing-padding-m);
}

/* ===========================================
   PAGE 2: AI ASSISTANT
   =========================================== */

.assistant-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
  padding-top: 15px;
}

.assistant-mic {
  color: var(--color-accent-good);
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition:
    transform var(--duration-medium) var(--motion-spatial),
    color var(--duration-medium) var(--motion-effects);
}

.assistant-mic:active {
  transform: scale(0.92);
}

.assistant-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: #707070;
  margin-top: 10px;
  letter-spacing: 0.3px;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

/* Speech text (word-by-word) */
.assistant-speech {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11px;
  font-weight: 400;
  color: #707070;
  margin-top: 4px;
  letter-spacing: 0.3px;
  line-height: 1.4;
  max-width: 130px;
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

/* Listening state: mic shrinks & moves up, text hides, speech appears */
.assistant-content.listening {
  justify-content: flex-end;
  padding-top: 0;
  padding-bottom: 80px;
}

.assistant-content.listening .assistant-mic {
  transform: scale(0.7);
}

.assistant-content.listening .assistant-text {
  opacity: 0;
  height: 0;
  margin: 0;
  overflow: hidden;
}

.assistant-content.listening .assistant-speech {
  opacity: 1;
}

/* Confirm button on assistant screen (hidden by default) */
.assistant-confirm-btn {
  opacity: 0;
  pointer-events: none;
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-short) var(--motion-spatial);
}

.assistant-confirm-btn.visible {
  opacity: 1;
  pointer-events: auto;
}

/* Prevent :active scale when in listening state */
.assistant-content.listening .assistant-mic:active {
  transform: scale(0.7);
}

/* Answer view (shown after confirm) */
.assistant-answer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0 60px;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-medium) var(--motion-effects);
  z-index: 3;
}

.assistant-answer.visible {
  opacity: 1;
  pointer-events: auto;
}

.answer-main {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 15px;
  font-weight: 400;
  color: var(--color-text-color);
  line-height: 1.3;
  margin-bottom: 8px;
}

.answer-main .accent {
  color: var(--color-accent-good);
  white-space: nowrap;
}

.answer-detail {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11px;
  font-weight: 400;
  color: #707070;
  line-height: 1.4;
}

/* Mic button (returns to initial state from answer view) */
.assistant-mic-btn {
  z-index: 10;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.assistant-mic-btn.visible {
  opacity: 1;
  pointer-events: auto;
}

/* Assistant glucose display (bottom arc) */
.assistant-nav {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.assistant-glucose-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: var(--color-accent-warning);
  letter-spacing: 1.5px;
}

.assistant-arrow {
  transition: transform var(--duration-short) var(--motion-spatial);
}

/* Assistant + button (reuses .add-context-btn styles) */
.assistant-add-btn {
  z-index: 10;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.assistant-add-btn.visible {
  opacity: 1;
  pointer-events: auto;
}

/* Assistant context menu (contextual follow-up questions) */
.assistant-context-menu {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  background: var(--color-background);
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 0 58px;
}

.assistant-context-menu.open {
  pointer-events: auto;
  opacity: 1;
}

/* Override shared .context-btn styles for assistant */
.assistant-ctx-btn {
  position: static;
  font-size: 12px;
  font-weight: 400;
  padding: 8px 10px;
  width: fit-content;
  max-width: 110px;
  align-self: center;
}

.assistant-context-menu.open .assistant-ctx-btn {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

/* Reverse stagger on close */
.assistant-context-menu:not(.open) .assistant-ctx-btn[data-ctx="0"] { transition-delay: 40ms; }
.assistant-context-menu:not(.open) .assistant-ctx-btn[data-ctx="1"] { transition-delay: 0ms; }

/* ===========================================
   MEAL INPUT SCREEN
   =========================================== */

.meal-input-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
  padding-top: 15px;
  transition: all var(--duration-medium) var(--motion-effects);
}

.meal-input-content.listening {
  justify-content: flex-end;
  padding-top: 0;
  padding-bottom: 80px;
}

.meal-mic {
  color: var(--color-accent-good);
  transition: transform var(--duration-medium) var(--motion-spatial);
}

.meal-input-content.listening .meal-mic {
  transform: scale(0.7);
}

.meal-prompt {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: #707070;
  margin-top: 10px;
  letter-spacing: 0.3px;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.meal-input-content.listening .meal-prompt {
  opacity: 0;
  position: absolute;
}

.meal-speech {
  font-size: 11px;
  color: #707070;
  max-width: 130px;
  margin-top: 4px;
  min-height: 1em;
}

.meal-options {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  background: var(--color-background);
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 0 58px;
}

.meal-options.open {
  pointer-events: auto;
  opacity: 1;
}

.meal-option-btn {
  position: static;
  font-size: 12px;
  font-weight: 400;
  padding: 8px 10px;
  width: fit-content;
  max-width: 110px;
  align-self: center;
}

.meal-options.open .meal-option-btn {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

.meal-confirm-btn {
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-short) var(--motion-spatial);
}

.meal-confirm-btn.visible {
  opacity: 1;
  pointer-events: auto;
}

.meal-answer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0 60px;
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.meal-answer.visible {
  opacity: 1;
}

.meal-answer-main {
  font-size: 15px;
  font-weight: 400;
  color: var(--color-text-color);
  line-height: 1.4;
}

.meal-answer-main .accent {
  color: var(--color-accent-good);
  white-space: nowrap;
}

.meal-answer-detail {
  font-size: 11px;
  color: #707070;
  margin-top: 8px;
  line-height: 1.3;
}

/* Meal favorites button (heart) - positioned on left, same as plus button */
.meal-favorites-btn {
  z-index: 10;
}

/* Meal favorites overlay */
.meal-favorites {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  background: var(--color-background);
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.meal-favorites.open {
  pointer-events: auto;
  opacity: 1;
}

.meal-fav-btn {
  position: absolute;
  padding: 8px 12px;
  border-radius: 20px;
  background: var(--color-surface-container);
  border: none;
  color: var(--color-text-color);
  font-family: 'Roboto Flex', sans-serif;
  font-size: 13px;
  font-weight: 400;
  cursor: pointer;
  opacity: 0;
  transform: scale(0.8);
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-medium) var(--motion-spatial);
  -webkit-tap-highlight-color: transparent;
}

/* Position favorite buttons in a scattered but balanced layout */
.meal-fav-btn[data-fav="0"] { top: 55px; left: 50%; transform: scale(0.8) translateX(-50%); }
.meal-fav-btn[data-fav="1"] { top: 110px; left: 60px; }
.meal-fav-btn[data-fav="2"] { top: 110px; right: 35px; }
.meal-fav-btn[data-fav="3"] { top: 165px; left: 50px; }
.meal-fav-btn[data-fav="4"] { top: 165px; right: 50px; }

.meal-favorites.open .meal-fav-btn[data-fav="0"] { transform: scale(1) translateX(-50%); }

.meal-favorites.open .meal-fav-btn {
  opacity: 1;
  pointer-events: auto;
}

.meal-favorites.open .meal-fav-btn:not([data-fav="0"]) {
  transform: scale(1);
}

/* Stagger animation for favorite buttons */
.meal-favorites.open .meal-fav-btn[data-fav="0"] { transition-delay: 0ms; }
.meal-favorites.open .meal-fav-btn[data-fav="1"] { transition-delay: 40ms; }
.meal-favorites.open .meal-fav-btn[data-fav="2"] { transition-delay: 80ms; }
.meal-favorites.open .meal-fav-btn[data-fav="3"] { transition-delay: 120ms; }
.meal-favorites.open .meal-fav-btn[data-fav="4"] { transition-delay: 160ms; }

/* Reverse stagger on close */
.meal-favorites:not(.open) .meal-fav-btn[data-fav="0"] { transition-delay: 120ms; }
.meal-favorites:not(.open) .meal-fav-btn[data-fav="1"] { transition-delay: 90ms; }
.meal-favorites:not(.open) .meal-fav-btn[data-fav="2"] { transition-delay: 60ms; }
.meal-favorites:not(.open) .meal-fav-btn[data-fav="3"] { transition-delay: 30ms; }
.meal-favorites:not(.open) .meal-fav-btn[data-fav="4"] { transition-delay: 0ms; }

@media (hover: hover) {
  .meal-fav-btn:hover {
    background: var(--button-bg-hover);
  }
}

/* ===========================================
   ACTIVITY INPUT SCREEN
   =========================================== */

.activity-input-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
  padding-top: 15px;
  transition: all var(--duration-medium) var(--motion-effects);
}

.activity-input-content.listening {
  justify-content: flex-end;
  padding-top: 0;
  padding-bottom: 80px;
}

.activity-mic {
  color: var(--color-accent-good);
  transition: transform var(--duration-medium) var(--motion-spatial);
}

.activity-input-content.listening .activity-mic {
  transform: scale(0.7);
}

.activity-prompt {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: #707070;
  margin-top: 10px;
  letter-spacing: 0.3px;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.activity-input-content.listening .activity-prompt {
  opacity: 0;
  position: absolute;
}

.activity-speech {
  font-size: 11px;
  color: #707070;
  max-width: 130px;
  margin-top: 4px;
  min-height: 1em;
}

.activity-confirm-btn {
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-short) var(--motion-spatial);
}

.activity-confirm-btn.visible {
  opacity: 1;
  pointer-events: auto;
}

.activity-answer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0 60px;
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.activity-answer.visible {
  opacity: 1;
}

.activity-answer-main {
  font-size: 15px;
  font-weight: 400;
  color: var(--color-text-color);
  line-height: 1.4;
}

.activity-answer-main .accent {
  color: var(--color-accent-good);
  white-space: nowrap;
}

.activity-answer-detail {
  font-size: 11px;
  color: #707070;
  margin-top: 8px;
  line-height: 1.3;
}

/* Activity favorites button (heart) - positioned on left, same as plus button */
.activity-favorites-btn {
  z-index: 10;
}

/* Activity favorites overlay */
.activity-favorites {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  background: var(--color-background);
  opacity: 0;
  transition: opacity var(--duration-medium) var(--motion-effects);
}

.activity-favorites.open {
  pointer-events: auto;
  opacity: 1;
}

.activity-fav-btn {
  position: absolute;
  padding: 8px 12px;
  border-radius: 20px;
  background: var(--color-surface-container);
  border: none;
  color: var(--color-text-color);
  font-family: 'Roboto Flex', sans-serif;
  font-size: 13px;
  font-weight: 400;
  cursor: pointer;
  opacity: 0;
  transform: scale(0.8);
  transition:
    opacity var(--duration-medium) var(--motion-effects),
    transform var(--duration-medium) var(--motion-spatial);
  -webkit-tap-highlight-color: transparent;
}

/* Position activity favorite buttons */
.activity-fav-btn[data-fav="0"] { top: 70px; left: 50%; transform: scale(0.8) translateX(-50%); }
.activity-fav-btn[data-fav="1"] { top: 130px; left: 60px; }
.activity-fav-btn[data-fav="2"] { top: 130px; right: 60px; }

.activity-favorites.open .activity-fav-btn[data-fav="0"] { transform: scale(1) translateX(-50%); }

.activity-favorites.open .activity-fav-btn {
  opacity: 1;
  pointer-events: auto;
}

.activity-favorites.open .activity-fav-btn:not([data-fav="0"]) {
  transform: scale(1);
}

/* Stagger animation for activity favorite buttons */
.activity-favorites.open .activity-fav-btn[data-fav="0"] { transition-delay: 0ms; }
.activity-favorites.open .activity-fav-btn[data-fav="1"] { transition-delay: 40ms; }
.activity-favorites.open .activity-fav-btn[data-fav="2"] { transition-delay: 80ms; }

/* Reverse stagger on close */
.activity-favorites:not(.open) .activity-fav-btn[data-fav="0"] { transition-delay: 60ms; }
.activity-favorites:not(.open) .activity-fav-btn[data-fav="1"] { transition-delay: 30ms; }
.activity-favorites:not(.open) .activity-fav-btn[data-fav="2"] { transition-delay: 0ms; }

@media (hover: hover) {
  .activity-fav-btn:hover {
    background: var(--button-bg-hover);
  }
}

/* ===========================================
   DEBUG PANEL - Glucose Slider (DEPRECATED - now in landing-slider)
   =========================================== */

/* Old debug panel - hidden, slider moved to landing footer */
.debug-panel {
  display: none;
}

#glucose-slider {
  width: 150px;
  height: 2px;
  -webkit-appearance: none;
  appearance: none;
  background: #333;
  border-radius: 1px;
  outline: none;
}

#glucose-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--slider-thumb-color, var(--color-accent-good));
  cursor: pointer;
  border: none;
  transition: background-color var(--duration-medium) var(--motion-effects);
}

#glucose-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--slider-thumb-color, var(--color-accent-good));
  cursor: pointer;
  border: none;
  transition: background-color var(--duration-medium) var(--motion-effects);
}

.glucose-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-accent-good);
  min-width: 32px;
  text-align: center;
  transition: color var(--duration-medium) var(--motion-effects);
}

/* Trend arrow button */
.trend-arrow-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #444;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    transform var(--duration-short) var(--motion-spatial),
    background-color var(--duration-short) var(--motion-effects);
}

.trend-arrow-btn:hover {
  background: #555;
}

.trend-arrow-btn:active {
  transform: scale(0.92);
}

.trend-arrow-btn svg {
  transition: transform var(--duration-medium) var(--motion-spatial);
}

/* ===========================================
   GLUCOSE GRAPH
   =========================================== */

.glucose-graph {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  cursor: pointer;
  opacity: 0;
  visibility: hidden;
  transition:
    opacity var(--duration-long) var(--motion-effects),
    visibility var(--duration-long) var(--motion-effects);
}

.glucose-graph.visible {
  opacity: 1;
  visibility: visible;
}

.glucose-graph.hidden {
  display: none;
}

/* Blob squish class - animation handled by JavaScript spring physics */
.glucose-blob.twitch {
  will-change: transform;
}

/* Blob fade out */
.glucose-blob.fade-out {
  opacity: 0;
  transition: opacity var(--duration-long) var(--motion-effects);
}

.graph-svg {
  width: 100%;
  height: 100%;
}

/* Horizontal boundary lines (dark gray) */
.graph-boundary {
  stroke: #444;
  stroke-width: 0.5;
}

/* Base graph line (always white) */
.graph-line-base {
  stroke: #fff;
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* History graph line (older data, same style as main) */
.graph-line-history {
  stroke: #fff;
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* Pan group for smooth transitions */
.graph-pan-group {
  transition: transform var(--duration-medium) var(--motion-spatial);
}

/* Highlight overlay (colored segment by zone) */
.graph-line-highlight {
  stroke: var(--color-accent-good);
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: stroke var(--duration-medium) var(--motion-effects);
}

/* Current position dot - position animated via JS for smooth curve following */
.graph-now-dot {
  fill: var(--color-accent-good);
  cursor: grab;
  transition: fill var(--duration-medium) var(--motion-effects);
  /* cx/cy animated via JavaScript for smooth path following */
}

.graph-now-dot:active {
  cursor: grabbing;
}

/* Invisible hitbox for slider */
.graph-slider-hitbox {
  cursor: grab;
}

.graph-slider-hitbox:active {
  cursor: grabbing;
}

/* Vertical dashed line at "now" */
.graph-now-line {
  stroke: var(--color-accent-good);
  stroke-width: 0.5;
  pointer-events: none;
  transition: stroke var(--duration-medium) var(--motion-effects);
}

/* Time label background (cuts the dashed line) */
.graph-time-bg {
  fill: var(--color-background);
}

/* Time label (can be multi-line) */
.graph-now-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 11px;
  fill: var(--color-accent-good);
  text-anchor: middle;
  pointer-events: none;
  transition: fill var(--duration-medium) var(--motion-effects);
}

.graph-time-line1,
.graph-time-line2 {
  fill: inherit;
}


/* Hide blob when graph is visible */
.glucose-graph:not(.hidden) ~ .glucose-blob {
  display: none;
}

/* Context markers on graph (meal, insulin, activity, med) */
.graph-context-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  background: var(--button-bg);
  border-radius: 50%;
  min-width: 20px;
  min-height: 20px;
  width: 20px;
  height: 20px;
  box-sizing: border-box;
}

.graph-context-badge.with-value {
  border-radius: 10px;
  width: auto;
  min-width: auto;
  padding: 2px 6px;
}

.graph-context-icon {
  width: 12px;
  height: 12px;
  filter: brightness(0) saturate(100%) invert(70%) sepia(65%) saturate(450%) hue-rotate(50deg) brightness(92%) contrast(88%);
}

.graph-context-value {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 8px;
  font-weight: 500;
  color: var(--color-accent-good);
  line-height: 1;
  padding-right: 2px;
}

/* ===========================================
   INSULIN INPUT SCREEN
   =========================================== */

.insulin-input-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 20px;
  margin-top: -35px;
}

/* Insulin type tabs */
.insulin-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 3px;
  margin-top: 40px;
}

.insulin-tab {
  background: none;
  border: none;
  color: var(--color-faded-text);
  font-family: 'Roboto Flex', sans-serif;
  font-size: 14px;
  font-weight: 400;
  letter-spacing: 0.5px;
  cursor: pointer;
  padding: 4px 8px;
  transition:
    color var(--duration-short) var(--motion-effects),
    font-size var(--duration-short) var(--motion-spatial),
    font-weight var(--duration-short) var(--motion-effects);
}

.insulin-tab.active {
  color: var(--color-text-color);
  font-size: 18px;
  font-weight: 500;
}

/* Number picker */
.number-picker {
  position: relative;
  height: 160px;
  width: 100px;
  overflow: hidden;
  margin: 0;
  margin-top: -14px;
  /* Fade edges with gradient mask */
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 6%,
    rgba(0,0,0,0.5) 25%,
    rgba(0,0,0,1) 42%,
    rgba(0,0,0,1) 58%,
    rgba(0,0,0,0.5) 75%,
    transparent 94%
  );
  mask-image: linear-gradient(
    to bottom,
    transparent 6%,
    rgba(0,0,0,0.5) 25%,
    rgba(0,0,0,1) 42%,
    rgba(0,0,0,1) 58%,
    rgba(0,0,0,0.5) 75%,
    transparent 94%
  );
}

.picker-items {
  display: flex;
  flex-direction: column;
  align-items: center;
  /* Transform handled by spring animation in JS */
}

.picker-item {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 18px;
  font-weight: 400;
  color: var(--color-text-color);
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  /* M3 Expressive: smooth transitions for scale/opacity changes */
  transition:
    transform var(--duration-short) var(--motion-spatial),
    opacity var(--duration-short) var(--motion-effects),
    font-size var(--duration-short) var(--motion-spatial);
  will-change: transform, opacity;
}

.picker-label {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-color);
  letter-spacing: 0.5px;
  margin-top: 4px;
}

/* Confirm button */
.confirm-btn {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 36px;
  height: 36px;
  padding: 4px;
  border-radius: 50%;
  background: var(--color-surface-container);
  border: none;
  color: var(--color-text-color);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 0 6px var(--color-background);
  transition:
    transform var(--duration-short) var(--motion-spatial),
    background-color var(--duration-short) var(--motion-effects);
}

.confirm-btn svg {
  width: 20px;
  height: 20px;
}

.confirm-btn:active {
  transform: translateX(-50%) scale(0.92);
}

.confirm-btn.morphing {
  z-index: 100;
  border-radius: 42%;
}

/* ===========================================
   INSULIN CONFIRMATION SCREEN
   =========================================== */

.confirm-blob {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 85px;
  height: 85px;
  background: var(--color-text-color);
  border-radius: 42%;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Slight organic blob shape */
  animation: blob-float 6s ease-in-out infinite;
}

@keyframes blob-float {
  0%, 100% { border-radius: 42% 58% 45% 55% / 55% 45% 55% 45%; }
  25% { border-radius: 55% 45% 58% 42% / 45% 55% 42% 58%; }
  50% { border-radius: 45% 55% 42% 58% / 58% 42% 55% 45%; }
  75% { border-radius: 58% 42% 55% 45% / 42% 58% 45% 55%; }
}

.confirm-blob svg {
  width: 36px;
  height: 36px;
}

.confirm-text {
  font-family: 'Roboto Flex', sans-serif;
  font-size: var(--text-font-size-l);
  font-weight: 600;
  fill: var(--color-text-color);
  letter-spacing: 1px;
}

/* Context button active state (no background) */
.context-btn.active {
  background: transparent;
}

/* Insulin screens use fast fade transition */
[data-screen="insulin-input"],
[data-screen="insulin-confirm"] {
  transform: none;
  opacity: 0;
  z-index: 20; /* Above context menu and home screen */
  background: var(--color-background);
  transition: opacity 0.15s ease-out;
}

[data-screen="insulin-input"].active,
[data-screen="insulin-confirm"].active {
  transform: none;
  opacity: 1;
}

/* ===========================================
   MED (HONEY) INPUT SCREEN
   =========================================== */

[data-screen="med-input"] {
  transform: none;
  opacity: 0;
  z-index: 20;
  background: var(--color-background);
  transition: opacity 0.15s ease-out;
}

[data-screen="med-input"].active {
  transform: none;
  opacity: 1;
}

.med-input-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 20px;
  margin-top: -35px;
}

.med-title {
  font-family: 'Roboto Flex', sans-serif;
  font-size: 18px;
  font-weight: 500;
  color: var(--color-text-color);
  letter-spacing: 0.5px;
  margin-bottom: 3px;
  margin-top: 40px;
}

.med-picker {
  /* Same styling as insulin picker */
}

/* ===========================================
   REDUCED MOTION - Accessibility
   =========================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
